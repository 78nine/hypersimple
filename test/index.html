<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>hypersimple</title>
  <script src="../index.js"></script>
  <script>
  const {comp, html, render, update} = hypersimple;
  this.onload = () => {

    // components
    const Button = comp(model => html`
      <button onclick=${model.onclick}>
        ${model.text}
      </button>
    `);

    // main App: just like any component
    const App = comp(model => html`
      Lorem ipsum: ${model.count}
      <br>
      ${Button(model)}
    `);

    // model: it will be mutated to trigger updates on changes
    const arr = [1, 2, 3];
    const model = {
      count: 0,
      text: 'increment',
      onclick() {
        this.count++;
      },
      some: {
        nested: {
          value: arr
        }
      }
    };

    // render
    render(document.body, () => App(model));

    setTimeout(() => {
      update(model, {
        some: {
          nested: {
            value: [1, 4, 3]
          }
        }
      });
      console.log(model.some.nested.value === arr, arr);
    }, 1000);
  };
  </script>
</head>
</html>
